<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¼–ç¨‹å¤§å¸ˆ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .header {
            background: rgba(255,255,255,0.1);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 1000px;
            backdrop-filter: blur(10px);
            border-radius: 15px;
            margin-bottom: 20px;
        }
        .header h1 { color: white; font-size: 24px; }
        .game-info { color: white; font-size: 14px; }
        .game-container {
            display: flex;
            gap: 20px;
            width: 100%;
            max-width: 1000px;
        }
        .task-panel {
            flex: 1;
            background: rgba(255,255,255,0.95);
            padding: 25px;
            border-radius: 15px;
        }
        .task-panel h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 20px;
        }
        .task-description {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            line-height: 1.6;
            color: #333;
        }
        .task-input {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
        }
        .task-input:focus {
            outline: none;
            border-color: #667eea;
        }
        .code-panel {
            flex: 1;
            background: rgba(255,255,255,0.95);
            padding: 25px;
            border-radius: 15px;
        }
        .code-panel h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 20px;
        }
        .output-area {
            background: #1a1a2e;
            color: #43e97b;
            padding: 15px;
            border-radius: 10px;
            min-height: 200px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            overflow-y: auto;
        }
        .controls {
            margin-top: 20px;
            text-align: center;
        }
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
        }
        .btn-start { background: linear-gradient(45deg, #43e97b, #38f9d7); color: white; }
        .btn-run { background: linear-gradient(45deg, #4facfe, #00f2fe); color: white; }
        .btn-next { background: linear-gradient(45deg, #feca57, #ff9f43); color: white; }
        .btn-back { background: linear-gradient(45deg, #f093fb, #f5576c); color: white; }
        .btn:hover { transform: scale(1.05); }
        .message {
            color: #feca57;
            font-size: 16px;
            margin-top: 10px;
            min-height: 24px;
            text-align: center;
        }
        .command-help {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        .command-help h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .command-help ul {
            list-style: none;
            padding: 0;
        }
        .command-help li {
            padding: 5px 0;
            color: #333;
            font-size: 13px;
        }
        .command-help code {
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ’» ç¼–ç¨‹å¤§å¸ˆ</h1>
        <div class="game-info">
            å…³å¡: <span id="level">1</span> | å¾—åˆ†: <span id="score">0</span>
        </div>
        <button class="btn btn-back" onclick="location.href='../index.html'">è¿”å›</button>
    </div>
    
    <div class="game-container">
        <div class="task-panel">
            <h2>ğŸ“ ä»»åŠ¡æè¿°</h2>
            <div class="task-description" id="taskDescription"></div>
            <textarea class="task-input" id="codeInput" placeholder="åœ¨æ­¤è¾“å…¥ä½ çš„ä»£ç ..."></textarea>
        </div>
        
        <div class="code-panel">
            <h2>ğŸ–¥ï¸ è¾“å‡º</h2>
            <div class="output-area" id="outputArea">ç­‰å¾…è¿è¡Œä»£ç ...</div>
            
            <div class="command-help">
                <h3>ğŸ’¡ å¯ç”¨å‘½ä»¤</h3>
                <ul>
                    <li><code>print æ–‡æœ¬</code> - è¾“å‡ºæ–‡æœ¬</li>
                    <li><code>add æ•°å­—1 æ•°å­—2</code> - ç›¸åŠ </li>
                    <li><code>sub æ•°å­—1 æ•°å­—2</code> - ç›¸å‡</li>
                    <li><code>mul æ•°å­—1 æ•°å­—2</code> - ç›¸ä¹˜</li>
                    <li><code>div æ•°å­—1 æ•°å­—2</code> - ç›¸é™¤</li>
                    <li><code>set å˜é‡å å€¼</code> - è®¾ç½®å˜é‡</li>
                    <li><code>get å˜é‡å</code> - è·å–å˜é‡</li>
                    <li><code>if æ¡ä»¶ å‘½ä»¤</code> - æ¡ä»¶åˆ¤æ–­</li>
                    <li><code>loop æ¬¡æ•° å‘½ä»¤</code> - å¾ªç¯</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="controls">
        <button class="btn btn-start" id="startBtn" onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
        <button class="btn btn-run" id="runBtn" onclick="runCode()" style="display: none;">â–¶ è¿è¡Œä»£ç </button>
        <button class="btn btn-next" id="nextBtn" onclick="nextLevel()" style="display: none;">â¡ ä¸‹ä¸€å…³</button>
        <div class="message" id="message"></div>
    </div>

    <script>
        const tasks = [
            {
                level: 1,
                description: 'æ¬¢è¿æ¥åˆ°ç¼–ç¨‹å¤§å¸ˆï¼\n\nä»»åŠ¡ï¼šä½¿ç”¨ print å‘½ä»¤è¾“å‡º "Hello World"\n\næç¤ºï¼šç›´æ¥è¾“å…¥ print Hello World å³å¯',
                expectedOutput: 'Hello World',
                hint: 'print å‘½ä»¤ç”¨äºè¾“å‡ºæ–‡æœ¬'
            },
            {
                level: 2,
                description: 'ä»»åŠ¡ï¼šè®¡ç®— 5 + 3 çš„ç»“æœå¹¶è¾“å‡º\n\næç¤ºï¼šä½¿ç”¨ add å‘½ä»¤è¿›è¡ŒåŠ æ³•è¿ç®—',
                expectedOutput: '8',
                hint: 'add 5 3'
            },
            {
                level: 3,
                description: 'ä»»åŠ¡ï¼šè®¡ç®— 10 - 4 çš„ç»“æœå¹¶è¾“å‡º\n\næç¤ºï¼šä½¿ç”¨ sub å‘½ä»¤è¿›è¡Œå‡æ³•è¿ç®—',
                expectedOutput: '6',
                hint: 'sub 10 4'
            },
            {
                level: 4,
                description: 'ä»»åŠ¡ï¼šè®¡ç®— 3 Ã— 4 çš„ç»“æœå¹¶è¾“å‡º\n\næç¤ºï¼šä½¿ç”¨ mul å‘½ä»¤è¿›è¡Œä¹˜æ³•è¿ç®—',
                expectedOutput: '12',
                hint: 'mul 3 4'
            },
            {
                level: 5,
                description: 'ä»»åŠ¡ï¼šè®¾ç½®å˜é‡ x ä¸º 10ï¼Œç„¶åè¾“å‡º x çš„å€¼\n\næç¤ºï¼šå…ˆä½¿ç”¨ set è®¾ç½®å˜é‡ï¼Œå†ç”¨ get è·å–',
                expectedOutput: '10',
                hint: 'set x 10 ç„¶å get x'
            },
            {
                level: 6,
                description: 'ä»»åŠ¡ï¼šä½¿ç”¨ loop å‘½ä»¤è¾“å‡º 3 æ¬¡ "ç¼–ç¨‹çœŸæœ‰è¶£"\n\næç¤ºï¼šloop 3 print ç¼–ç¨‹çœŸæœ‰è¶£',
                expectedOutput: 'ç¼–ç¨‹çœŸæœ‰è¶£\nç¼–ç¨‹çœŸæœ‰è¶£\nç¼–ç¨‹çœŸæœ‰è¶£',
                hint: 'loop å‘½ä»¤å¯ä»¥é‡å¤æ‰§è¡Œå‘½ä»¤'
            },
            {
                level: 7,
                description: 'ä»»åŠ¡ï¼šè®¡ç®— (5 + 3) Ã— 2 çš„ç»“æœ\n\næç¤ºï¼šå…ˆè®¡ç®—åŠ æ³•ï¼Œå†ä¹˜ä»¥ 2',
                expectedOutput: '16',
                hint: 'éœ€è¦åˆ†ä¸¤æ­¥è®¡ç®—'
            },
            {
                level: 8,
                description: 'ä»»åŠ¡ï¼šè®¾ç½®å˜é‡ a ä¸º 5ï¼Œb ä¸º 3ï¼Œè¾“å‡º a + b çš„ç»“æœ\n\næç¤ºï¼šä½¿ç”¨ set å‘½ä»¤è®¾ç½®å¤šä¸ªå˜é‡',
                expectedOutput: '8',
                hint: 'set a 5, set b 3, ç„¶å add'
            }
        ];
        
        let gameRunning = false;
        let currentLevel = 0;
        let score = 0;
        let variables = {};
        let output = [];
        
        function showMessage(text) {
            document.getElementById('message').textContent = text;
        }
        
        function startGame() {
            gameRunning = true;
            currentLevel = 0;
            score = 0;
            
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('runBtn').style.display = 'inline-block';
            
            loadLevel();
        }
        
        function loadLevel() {
            const task = tasks[currentLevel];
            document.getElementById('taskDescription').textContent = task.description;
            document.getElementById('codeInput').value = '';
            document.getElementById('outputArea').textContent = 'ç­‰å¾…è¿è¡Œä»£ç ...';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('runBtn').style.display = 'inline-block';
            document.getElementById('runBtn').disabled = false;
            
            updateUI();
            showMessage('');
        }
        
        function runCode() {
            const code = document.getElementById('codeInput').value.trim();
            if (!code) {
                showMessage('è¯·è¾“å…¥ä»£ç ');
                return;
            }
            
            variables = {};
            output = [];
            
            try {
                executeCode(code);
                const result = output.join('\n');
                document.getElementById('outputArea').textContent = result || 'æ— è¾“å‡º';
                
                const task = tasks[currentLevel];
                if (result === task.expectedOutput) {
                    showMessage('ğŸ‰ ä»»åŠ¡å®Œæˆï¼');
                    score += 10 * (currentLevel + 1);
                    document.getElementById('runBtn').style.display = 'none';
                    document.getElementById('nextBtn').style.display = 'inline-block';
                    document.getElementById('runBtn').disabled = true;
                    updateUI();
                } else {
                    showMessage('âŒ è¾“å‡ºç»“æœä¸æ­£ç¡®ï¼Œè¯·é‡è¯•');
                }
            } catch (error) {
                document.getElementById('outputArea').textContent = 'é”™è¯¯: ' + error.message;
                showMessage('ä»£ç æ‰§è¡Œå‡ºé”™');
            }
        }
        
        function executeCode(code) {
            const lines = code.split('\n').filter(line => line.trim());
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                const parts = line.split(' ');
                const command = parts[0].toLowerCase();
                
                switch (command) {
                    case 'print':
                        output.push(parts.slice(1).join(' '));
                        break;
                    case 'add':
                        const sum1 = parseFloat(parts[1]);
                        const sum2 = parseFloat(parts[2]);
                        output.push((sum1 + sum2).toString());
                        break;
                    case 'sub':
                        const sub1 = parseFloat(parts[1]);
                        const sub2 = parseFloat(parts[2]);
                        output.push((sub1 - sub2).toString());
                        break;
                    case 'mul':
                        const mul1 = parseFloat(parts[1]);
                        const mul2 = parseFloat(parts[2]);
                        output.push((mul1 * mul2).toString());
                        break;
                    case 'div':
                        const div1 = parseFloat(parts[1]);
                        const div2 = parseFloat(parts[2]);
                        if (div2 === 0) throw new Error('é™¤æ•°ä¸èƒ½ä¸º0');
                        output.push((div1 / div2).toString());
                        break;
                    case 'set':
                        variables[parts[1]] = parts.slice(2).join(' ');
                        break;
                    case 'get':
                        const value = variables[parts[1]];
                        if (value === undefined) throw new Error('å˜é‡ä¸å­˜åœ¨: ' + parts[1]);
                        output.push(value.toString());
                        break;
                    case 'loop':
                        const count = parseInt(parts[1]);
                        const loopCommand = parts.slice(2).join(' ');
                        for (let j = 0; j < count; j++) {
                            executeCommand(loopCommand);
                        }
                        break;
                    case 'if':
                        const condition = parts[1];
                        const ifCommand = parts.slice(2).join(' ');
                        if (evaluateCondition(condition)) {
                            executeCommand(ifCommand);
                        }
                        break;
                    default:
                        throw new Error('æœªçŸ¥å‘½ä»¤: ' + command);
                }
            }
        }
        
        function executeCommand(command) {
            const parts = command.split(' ');
            const cmd = parts[0].toLowerCase();
            
            switch (cmd) {
                case 'print':
                    output.push(parts.slice(1).join(' '));
                    break;
                case 'add':
                    output.push((parseFloat(parts[1]) + parseFloat(parts[2])).toString());
                    break;
                case 'sub':
                    output.push((parseFloat(parts[1]) - parseFloat(parts[2])).toString());
                    break;
                case 'mul':
                    output.push((parseFloat(parts[1]) * parseFloat(parts[2])).toString());
                    break;
                case 'get':
                    output.push(variables[parts[1]].toString());
                    break;
            }
        }
        
        function evaluateCondition(condition) {
            const parts = condition.split(' ');
            const op = parts[1];
            const left = parseFloat(parts[0]);
            const right = parseFloat(parts[2]);
            
            switch (op) {
                case '>': return left > right;
                case '<': return left < right;
                case '==': return left === right;
                case '>=': return left >= right;
                case '<=': return left <= right;
                default: return false;
            }
        }
        
        function nextLevel() {
            currentLevel++;
            
            if (currentLevel >= tasks.length) {
                gameComplete();
            } else {
                loadLevel();
            }
        }
        
        function gameComplete() {
            document.getElementById('taskDescription').textContent = 'ğŸ‰ æ­å–œä½ å®Œæˆäº†æ‰€æœ‰ä»»åŠ¡ï¼\n\nä½ å·²ç»æˆä¸ºä¸€åç¼–ç¨‹å¤§å¸ˆï¼';
            document.getElementById('codeInput').value = '';
            document.getElementById('outputArea').textContent = 'æœ€ç»ˆå¾—åˆ†: ' + score;
            document.getElementById('runBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            showMessage('æ¸¸æˆé€šå…³ï¼');
        }
        
        function updateUI() {
            document.getElementById('level').textContent = currentLevel + 1;
            document.getElementById('score').textContent = score;
        }
    </script>
</body>
</html>